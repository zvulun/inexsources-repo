:docproductname: TIBA
:docproductname2: IZA500G/GR
:fileproductname: IZA500G-GR
:shortprodname: IZA500GR
:generic-camera-name: ALPR Camera

// set attribute (by uncommenting the line)
// used to determine which text/links to sections
// outside partials - should be used in partials
// see the playbook for full list

:xref-type-IZA500G:
:layout-type-userguide:

//related doc links are temporarily pointed
//to GDrive; when the site is live
//change this to :link-type-site:
:link-type-gdrive:

//enable the TOC to be placed in a specific position
:toc: macro

= {compname-short} ALPR for the {docproductname} Parking System

+++<font size="+3">+++ *Installation and Calibration Guide*+++</font>+++

image::ROOT:SLN-TIBA/TIBA_LOGO.png[image,150,align=left]

// restore section numbering from here on
:sectnums: all
{empty}
{empty}

// place the TOC in this specific position (capability enabled by :toc: macro at start
// of file

._Click to show the Table of Contents_
[%collapsible]
====

toc::[]

====

<<<

////

[#s_Related-Documents]

== Related Documents

._Click to show the Related Documents table_
[%collapsible]
====

[#t_Related-Documents]

.Related Documents

[table.withborders,width="100%",cols="51%,49%",options="header",]
|===
|Doc. No. |Title
//.^|xref:IZA500G:DocList.adoc[{fileproductname}-MAN-002b] |{docproductname2} Installation Guide
.^|https://drive.google.com/drive/folders/1oi7em94DgmiI9FC4h9iM_3BrjlgxvUYU?usp=share_link[{fileproductname}-MAN-002b,window=_blank] |{docproductname2} Installation Guide

//.^|xref:IZA500G:DocList.adoc[{fileproductname}-MAN-002a] |{docproductname2} User Guide
.^|https://drive.google.com/drive/folders/1oi7em94DgmiI9FC4h9iM_3BrjlgxvUYU?usp=share_link[{fileproductname}-MAN-002a,window=_blank] |{docproductname2} User Guide


.^|xref:MNT-ProdToMountMap:DocList.adoc[MOUNT-MAP-PRSNT-011] |Product-to-Mount Mapping


.^|xref:MNT-ProdToMountMap:DocList.adoc[Mounts] |Mounting Hardware documentation


.^|xref:IZDiscovery:DocList.adoc[{software-discovery} Utility] |{software-discovery} Utility software components


.^|xref:IZDiscovery:DocList.adoc[IZDISCOVERY-MAN-001] |{software-discovery} User Guide


.^|xref:RoadViewALPR:DocList.adoc[{software-ALPR} documentation] |(Depends on version)


.^|xref:EULA:DocList.adoc[EULA-400-DOC-001] |Software End User License Agreement (includes list of open source software)


.^|xref:IZL:DocList.adoc[{illum-non-strobe}-MAN-002] |{illum-non-strobe} Illuminator Series User Guide


.^|xref:IZPWR:DocList.adoc[IZPWRDIN-REV-x-TDSHEET] |IZPWR DIN Rail Mount Power Supplies Technical Data Sheet


.^|xref:IZIO:DocList.adoc[{hw-iocontroller}-6060-MAN-001] |{hw-iocontroller} Digital I/O Controller Installation and User Guide


.^|xref:IZ4POE:DocList.adoc[{hw-poeinjector}-DIN-REV-xxx-TDSHEET] |{hw-poeinjector} Gigabit 4-Port PoE++ Injector Technical Data Sheet


.^|xref:LOOP-DTCR-L:DocList.adoc[{hw-loopdetect-l}-MAN-001] |{hw-loopdetect-l} Loop Detector Installation and User Guide


.^|xref:NDAA:DocList.adoc[NDAA-NB-COC-001] |NDAA Section 889 Certification of Compliance
|===

====

////

== Background
This document describes how to install,
configure and calibrate an {compname-short} {generic-camera-name}
for a single lane, to work with the {docproductname} Parking System.

== Applicable Products
*_\{why do we need this section if we have the BOM?}_*
{shortprodname} camera (Rev. F3)
with built-in {software-ALPR} (RV) video analytics - ver 1.15.54

== Computer and Software Requirements
* Computer running with Windows 10 or later
* Microsoft Edge browser

== Solution BOM
* Camera System:
** IZA500GR-DRW-P48 - for USA, Mexico, Canada
** IZA500GR-IRW-P48 - for Israel, EU, Taiwan, Australia, Vietnam, GCC, India, Singapore
* Power Supply for P48 models
** IZPWR75{plus}{hw-poeinjector} - for a single camera via POE
** IZPWR120{plus}{hw-poeinjector} - for two cameras via POE
** IZPWR240{plus}{hw-poeinjector} - for four cameras via POE
* Camera Mounting hardware
** IZMNTA-WE - wall mount
** *_\{incorrect; IZMNTA-WE comes with
removable pole mount}_* IZMNTA-WE{plus}MNT-PMA -  pole mount
** IZMNTA-UC - under-ceiling
* IZCLOUD-APM - IZCloud Automatic License Plate Recognition (ALPR) Performance Monitoring

== Lane Design

[#f_Rear-Capture]

.Typical Rear-Capture Design

image::ROOT:SLN-TIBA/IZA500G-FIG-097_AmanoLaneDesign.png[image,800,align=center]
{empty} +

.Typical Front-Capture Design

image::ROOT:SLN-TIBA/IZA500G-FIG-099_TIBAFrontLaneDesign.png[image,800,align=center]

{empty} +

== Camera Wiring

.Camera Wiring

image::ROOT:SLN-TIBA/IZA500G-FIG-101_TIBA_Wiring.png[image,800,align=center]

{empty} +

.Wiring Table
[table.withborders,width="100%",cols="7%,35%,58%",options="header",]
|===
|Item |Description |Ordering Information
|A a|*LAN Cables* |Supplied by integrator
|B a|*Power Supply for {hw-poeinjector} +
(PoE{plus} Injector)* +
Requires 48 VDC
a|
For 1 camera, use a 75 W supply (IZPWR75) +
For 2 cameras, use a 120 W supply (IZPWR120) +
For 4 cameras, use a 240 W supply (IZPWR240)
|C a|*Inductive Loop* |Supplied by integrator
|D a|*Gate* |Supplied by integrator
|===

== Use {software-discovery} and Allocate IP Addresses

. Allocate 3 consecutive IP addresses for
the onboard processor and the
LPR and OV cameras (sensors).
For example: +
* Processor - http://192.168.5.100/ +
* LPR Camera - http://192.168.5.101/ +
* OV Camera - http://192.168.5.102/ +

. Use {software-discovery} to find the
onboard processor and LPR/OV cameras, and to
change their IP addresses to the ones
you allocated.

include::ROOT:partial$IZDiscovery/p-IZDISCOVERY-To-Include.adoc[leveloffset=+1]

[#s_Configure-Microsoft-Edge]

== Configure Microsoft Edge

include::ROOT:partial$p-configure-ms-edge-1.adoc[First part of MS Edge configuration]

image::ROOT:SLN-TIBA/image-TIBA-MSedge-settings-2.png[image,800, align=center]

include::ROOT:partial$p-configure-ms-edge-2.adoc[[Second part of MS Edge configuration]]

[#s_Logging-In-to-the-Camera]

== Log In to a Camera

include::ROOT:partial$IZA800G/p-camera-logging-in.adoc[Logging in to the Camera]

=== Live View (link at upper right)
* The focus will be set automatically;
can be fine-adjusted manually with buttons
* Use the buttons to Zoom in/out

=== Admin (link at upper right)

* Enter username and password (root/IZpass12)
* Use the menu at the left to select the parameter
category/sub-category/group.
+
[IMPORTANT]
==================
*After changing settings, remember to
click the Apply button at the bottom of
each parameter section.*
==================

== Configure the LPR Camera (Sensor)

Change the parameters to match the following screen captures:

=== LPR Camera - Video &amp; Device &gt; Video Streams

.LPR Camera - Video &amp; Device &gt; Video Streams

image::ROOT:SLN-TIBA/IZA500G-FIG-110_TIBALPRVideoStreams.png[image,600]

{empty} +

=== LPR Camera - Video &amp; Device &gt; Video Streams &gt; Camera Settings

[NOTE]
=====================
Before changing the Camera Settings parameters, be sure to click
the Default(Day) link at the top of
the Camera Settings table.

If the image is too dark at night, increase
Shutter Time Min/Max. However, higher (longer)
shutter speeds may cause smearing at higher
vehicle speeds.

Use the recommended Max AGC Gain
value for the lowest noise;
*_\{is this still true?}_* however, if the image moves,
increase this value (but the image will be less clear).
=====================

.LPR Camera - Video &amp; Device &gt; Video Streams &gt; Camera Settings

image::ROOT:SLN-TIBA/IZA500G-FIG-112_TIBALPRCameraSettings.png[image,600]

{empty} +

=== LPR Camera - Video &amp; Device &gt; Video Streams &gt; Primary Stream

.LPR Camera - Video &amp; Device &gt; Video Streams &gt; Primary Stream

image::ROOT:SLN-TIBA/IZA500G-FIG-114_TIBALPRPrimaryStream.png[image,600]

{empty} +

=== LPR Camera - System &gt; Access Level

.LPR Camera - System &gt; Access Level

image::ROOT:SLN-TIBA/IZA500G-FIG-116_TIBALPRAccessLevel.png[image,600]

== Configure the OV Camera (Sensor)

Change the parameters to match the following screen captures:

=== OV Camera - Video &amp; Device &gt; Video Streams

.OV Camera - Video &amp; Device &gt; Video Streams

image::ROOT:SLN-TIBA/IZA500G-FIG-111_TIBAOVVideoStreams.png[image,600]

{empty} +

=== OV Camera - Video &amp; Device &gt; Video Streams &gt; Camera Settings

[NOTE]
=====================
Before changing the Camera Settings parameters, be sure to click
the Default(Day) link at the top of
the Camera Settings table.

If the image is too dark at night, increase
Shutter Time Min/Max. However, higher (longer)
shutter speeds may cause smearing at higher
vehicle speeds.

Use the recommended Max AGC Gain
value for the lowest noise;
*_\{is this still true?}_* however, if the image moves,
increase this value (but the image will be less clear).
=====================

.OV Camera - Video &amp; Device &gt; Video Streams &gt; Camera Settings

image::ROOT:SLN-TIBA/IZA500G-FIG-113_TIBAOVCameraSettings.png[image,600]

{empty} +

=== OV Camera - Video &amp; Device &gt; Video Streams &gt; Primary Stream

.OV Camera - Video &amp; Device &gt; Video Streams &gt; Primary Stream

image::ROOT:SLN-TIBA/IZA500G-FIG-115_TIBAOVPrimaryStream.png[image,600]

{empty} +

=== OV Camera - System &gt; Access Level

.OV Camera - System &gt; Access Level

image::ROOT:SLN-TIBA/IZA500G-FIG-117_TIBAOVAccessLevel.png[image,600]

== Prepare to Aim and Calibrate

There are two cameras (sensors) in the Camera System.
Both are calibrated in nearly the same way.
The LPR camera is set to capture in black and white,
and the Overview (OV) camera is set to capture in color.

The OV camera can be used both to display an overview image,
and to perform LPR recognition.
You may even be able to improve read accuracy by
changing the zoom to have one camera "see" closer
than the other one.

Move a vehicle next to, and at the middle of
the capture line. (This is the position at
which the vehicle detector signals that the
vehicle is present.) Ensure that the Camera System
is aimed at the middle of the lane, and is at the
required capture distance.

Alternatively, in a lab, position a license plate
at the expected distance and height.

[#s_Using-RoadView]

== Log In to {software-ALPR}

=== Logging In
. Open a Microsoft Edge browser in Internet Explorer mode.

. Type in the IP address of the {software-ALPR} computer.
For example: +
http://192.168.5.100/[http://192.168.5.100/]

. You will see the login screen. Enter the default username
and password (root, root):
+
[#f_Logging-In-to-RoadView]

.Logging In to {software-ALPR}

image::ROOT:RoadViewALPR/RoadViewLoginWindow.png[image,width=209,height=143]

. You should see the {software-ALPR} Live (Journal) tab.

=== Logging Out (Multi-line Menu Icon)

* Click on the multi-line menu icon at the upper right of the {shortprodname} screen

* Select "Logout"

[#f_Logout-Multi-line-Menu]

.Logout (Multi-line Menu)

image::RoadViewALPR:UserGuide/image5.png[image,width=136,height=113]

== Configure {software-ALPR} - Settings Tab

Use the Settings tab after the first installation or
re-installation of the ALPR system, or when some
fundamental parameters need updating.
For example, if the Camera System was moved
to a different location (time zone).

[NOTE]

========================================
Configure the parameters in the order in this
section of the document.

After clicking the Save button at the end of the
Detector Configuration section, it will take
several seconds before the Live tab
can start displaying Events.
Also, some defaults and/or available
parameters may change, depending on the
Detector Configuration "Mode" selected.
========================================

[#s_Software-Version-and-Camera-Information]

=== Software Version and Camera Information

The box at the upper right of the Settings screen shows:

* The {shortprodname} software version (verify this is the correct version)

* The model, part number and serial number of the camera(s) {shortprodname} is communicating with:

[#f_Software-Version-and-Camera-Information-Section]

.Software Version and Camera Information Section

image::ROOT:SLN-TIBA/RV-TIBA-FIG-001a_VersionAndCameraInfo.png[image,400]

[#s_Network-Settings]

=== Network Settings

[#f_Network-Settings-Section]

.Network Settings Section

image::ROOT:SLN-TIBA/RV-TIBA-FIG-001b_Network.png[image,600]

* If needed, set the {shortprodname} computer's IP address parameters.

* Remember to click the Save button in this section;
the change will be applied immediately.

[IMPORTANT]

========================================

The Network Settings refer to the
+++<u>+++{software-ALPR} computer+++</u>+++
(+++<u>+++Camera System)+++</u>+++ - NOT the
computer on which the browser displaying the GUI is running.

*+++<u>+++It is highly recommended to use a fixed IP
address (not DHCP)+++</u>+++*. A fixed IP address enables
you to access the computer using the same URL every time,
even after unexpected power outages.

========================================

[#s_Date-and-Time-Settings]

=== Date and Time Settings

[IMPORTANT]

========================================

The Date and Time Settings refer to the location of the
+++<u>+++{software-ALPR} computer+++</u>+++
(+++<u>+++Camera System)+++</u>+++ - NOT the
computer on which the browser displaying the GUI is running.

The Time Zone selections are organized by continent.
For example, the "America/" prefix covers various cities
and countries in North America (U.S. and Canada) and South America.

========================================

[#f_Date-and-Time-Settings-Section]

.Date and Time Settings Section

image::ROOT:SLN-TIBA/RV-TIBA-FIG-001d_Date_Time.png[image,600]

// * Set Time (Automatically/Manually)

* Select "Set Time Manually"

////
** If *Automatic*, the date and time will be updated from a central Network Time server. Select the appropriate server, and the interval at which you want {shortprodname} to poll for the date and time (selected from the Polling Interval dropdown).

*** Click the "Update Now" button to update the date and time immediately.

*** The icon (green check mark or red "x") indicates if the URL of the NTP server is correct, and the connection to it was successful.


** If *Manual*, click in the *Date and Time* box to display a calendar/time popup. You should also select a *Time Zone*; set it to the local time at the location in which the Camera System/DPU is installed (+++<u>+++not+++</u>+++ the UTC default).
////

* Click in the *Date and Time* box to display a
calendar/time popup. You should also select a *Time Zone*;
set it to the local time at the location in which the
Camera System is installed
(+++<u>+++not+++</u>+++ the UTC default).

* Remember to click the Save button at the end
of this section after making changes.

[#s_Lanes]

=== Lanes

Use this section to add and configure Lanes.

[#f_Lanes-Section]

.Lanes Section

image::ROOT:SLN-TIBA/RV-TIBA-FIG-004b_Lanes.png[image,600]

* Actions:

** +++<u>+++Edit+++</u>+++ - edit the Lane's parameters

** +++<u>+++Delete+++</u>+++ - delete the Lane
(a warning will be displayed)

** +++<u>+++Trigger+++</u>+++ - send a software trigger
immediately to {software-ALPR}
+
[NOTE]

========================================

Each Lane number must be unique in the overall ALPR system.

The images from all cameras capturing the same physical lane
will be combined into a single Event.

Each "Lane" is actually a virtual Lane. For example,
if you have two Camera Systems capturing the same physical lane,
you will need to create two different "Lanes",
and associate each Camera System's cameras with a different "Lane".

========================================
+
[#f_Add-Edit-Lane-Dialog]

.Add/Edit Lane Dialog

image::ROOT:SLN-TIBA/RV-TIBA-FIG-007a_EditLaneDialog.png[image,200]

* *ID* (required) - The identification number of
the lane to be captured by the cameras.
This number will appear associated with Events in the Live tab.

* *Name* (required) - The name of the Lane as it will appear
throughout the user interface (GUI).

* *Location* - Select one of the following options:

** *Unknown* - the camera's position relative to vehicles
is unknown.

** *Front* - the camera in this Lane is capturing images
from the front of vehicles

** *Rear* - the camera in this Lane is capturing images
from the rear of vehicles

* *Passageway* - Unused

* *Ignore Opposite Direction* - Unused

[#s_Cameras]

=== Cameras

[#f_Cameras-Section]

.Cameras Section

image::ROOT:SLN-TIBA/RV-TIBA-FIG-004c_Cameras.png[image,600]

* Actions:

** +++<u>+++Edit+++</u>+++ - edit the camera's parameters
(see <<f_Add-Edit-Camera-Dialog>>)

** +++<u>+++Delete+++</u>+++ - delete the camera
(a warning will be displayed)

* *Camera table headers:* Camera ID, Lane ID, Name, URL,
Type (as configured when the camera was added)

* *Image* - Thumbnail image from a recent camera image
+
[WARNING]

========================================
If you add a camera, or edit a camera's parameters and
click the Save button in this dialog
(even if you did not change the URL),
you may see a warning icon in the Image column.
The reappearance of the image indicates that the
core software has restarted, and Events will resume
being captured and displayed in the Live tab, with the
following changes: +
- The Transaction ID will restart at 1 for that camera. +
- The history of previous Events for that camera will be cleared
========================================

* *Add Camera* (button at end of Cameras section):
+
[#f_Add-Edit-Camera-Dialog]

.Add/Edit Camera Dialog

image::ROOT:SLN-TIBA/RV-TIBA-FIG-006a_EditCameraDialog.png[image,200]

** *Lane ID* - The identification number of the
lane being captured by the camera(s).
Select a Lane number you defined (see <<s_Lanes>>).
This number will appear associated with Events in the Live tab.
+
[NOTE]

========================================

The images from all cameras capturing the same physical
lane will be combined into a single Event.

Using the same Lane ID for different cameras
(even the LPR and OV cameras within the same Camera System)
will combine the reads into one Event (see <<s_Lanes>>).
You may even be able to improve read accuracy by changing
the zoom to have one camera "see" closer than the other one.

You could also position cameras to be in different positions
(front/rear).

========================================

** *Camera ID* - For internal use; should be unique in the
overall ALPR system

** *Name* - Camera name for internal use; should be unique
in the overall ALPR system

** *URL* - RTSP or HTTP URL:

*** RTSP stream URL example: +
rtsp:// <camera IP address>/cam0_0

*** HTTP URL example: +
http:// <camera IP address>

** *Type* - Type of camera (LPR or View)

** *Trigger Pre* -
Set as shown

////
Number of frames to be included in the set of frames used
to build an Event - +++<u>+++before+++</u>+++ the trigger
occurs.
////

** *Trigger Post* -
Set as shown

////
Number of frames to be included in the set of frames used
to build an Event - +++<u>+++after+++</u>+++ the trigger
occurs.
////


[#s_IZCloud-Integration]

=== {software-cloud} Integration

Enable {software-cloud} Integration and
set the parameters as follows:

.{software-cloud} Integration

image::ROOT:SLN-TIBA/RV-TIBA-FIG-002a_IZCloud.png[image,600]

#s_TIBA-Integration]

=== {docproductname} Integration

Enable {docproductname} Integration and
set the parameters as follows:

.{docproductname} Integration

image::ROOT:SLN-TIBA/RV-TIBA-FIG-002b_TIBA_Integration.png[image,600]

=== Direct Trigger

Set the Direct Trigger as shown here:

[#f_Direct-Trigger-Section]

.Direct Trigger Section

image::ROOT:SLN-TIBA/RV-TIBA-FIG-003a_Direct_Trigger.png[image,600]

* Remember to click the Save button under
the Detection Configuration section after
changing these parameters.

[#s_Trigger-Offset]

=== Trigger Offset

Enable Trigger Offset and
set the parameter as follows:

[#f_Trigger-Offset-Section]

.Trigger Offset Section

image::ROOT:SLN-TIBA/RV-TIBA-FIG-003b_Trigger_Offset.png[image,600]

[#s_Detector-Configuration]

=== Detector Configuration

* Set the parameters as follows.

* Remember to click the Save button
at the end of this section after
changing these parameters.

[#f_Detector-Configuration-Section]

.Detector Configuration Section

image::ROOT:SLN-TIBA/RV-TIBA-FIG-004a_Detector_Configuration.png[image,600]


== Configure {software-ALPR} - System Info Tab


[#s_Calibrating-the-Cameras-Using-RoadView]

== Calibrating the Cameras Using {software-ALPR}

*_\{put in Pinchas' rough draft and Max's screens, etc.}_*



[#s_Verify-System-Operation]

== Verify System Operation

* Using a license plate mounted in a lab,
or by driving a vehicle through the lane,
verify that an Event is generated with the
correct plate read (recorded in the {software-ALPR} Live (Journal) tab.

*_\{show picture of Live tab}_*

* Once the lane is active, verify that Events are being generated for each vehicle passing each camera, and that the recognition has sufficient accuracy and confidence.

== Legal Notices

include::ROOT:partial$p-front-matter-notice.adoc[Front Matter Notice]

include::ROOT:partial$p-software-precautions.adoc[ALPR Camera Safety Precautions]

+++<div class="pagebreak"> </div>+++

include::ROOT:partial$p-legal-disclaimer.adoc[Legal Disclaimer]

include::ROOT:partial$p-footer-copyright-short.adoc[Short Copyright Notice]

Doc. No. {docproductname}-MAN-002b
